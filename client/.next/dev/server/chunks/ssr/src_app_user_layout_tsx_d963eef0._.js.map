{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/victo/OneDrive/Desktop/Tesis/client/src/app/user/layout.tsx"],"sourcesContent":["import { cookies } from \"next/headers\";\nimport { redirect } from \"next/navigation\";\nimport React from \"react\";\n\nconst getUser = async () => {\n  const cookieStore = await cookies();\n  const token = cookieStore.get(\"auth_token\")?.value;\n  if (!token) {\n    return null;\n  }\n\n  try {\n    const baseUrl = process.env.API_ENDPOINT || \"http://localhost:8000/api\";\n    const response = await fetch(`${baseUrl}/auth/profile`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n      },\n      cache: \"no-store\", // Don't cache user data\n    });\n\n    if (!response.ok) {\n      return null;\n    }\n\n    const user = await response.json();\n    return user;\n  } catch (error) {\n    console.error(\"Failed to fetch user:\", error);\n    return null;\n  }\n};\n\nconst RootLayout = async ({ children }: { children: React.ReactNode }) => {\n  const user = await getUser();\n  if (!user) {\n    redirect(\"/auth/signin\");\n  }\n  return <div>{children}</div>;\n};\n\nexport default RootLayout;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;;;;AAGA,MAAM,UAAU;IACd,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,eAAe;IAC7C,IAAI,CAAC,OAAO;QACV,OAAO;IACT;IAEA,IAAI;QACF,MAAM,UAAU,QAAQ,GAAG,CAAC,YAAY,IAAI;QAC5C,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,aAAa,CAAC,EAAE;YACtD,QAAQ;YACR,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAChC,gBAAgB;YAClB;YACA,OAAO;QACT;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO;QACT;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO;IACT;AACF;AAEA,MAAM,aAAa,OAAO,EAAE,QAAQ,EAAiC;IACnE,MAAM,OAAO,MAAM;IACnB,IAAI,CAAC,MAAM;QACT,IAAA,iMAAQ,EAAC;IACX;IACA,qBAAO,8OAAC;kBAAK;;;;;;AACf;uCAEe"}}]
}